{% extends 'anki/layout.html' %}

{% load crispy_forms_tags %}

{% block title %}My collection{% endblock %}

{% block main %}
<main>
    <div id="message">{{ message }}</div>

    <div class="collection-grid">
        <div class="grid-area-left">
            <section id="deck-form-section">
                <h3>Create new deck</h3>
                    <form action="{% url 'create' 'deck' %}" method="post" id="deck-form">
                        {% csrf_token %}
                        {{ deck_form | crispy }}
                        <input type="submit" value="Create">
                    </form>
            </section>
        
            <section id="deck-section">
                <h3>My decks</h3>
        
                <table>
                    {% for deck in decks %}
                        <tr>
                            <td>{{ deck.name }}</td>
                        
                            <td><button type="button" class="link-btn" data-id="{{ deck.id }}">Manage</button></td>
                            
                            <td>
                                <form action="{% url 'archive' %}" method="post" id="archive-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="deck-to-archive" id="deck-to-archive" value="{{ deck.id }}">
                                    <button type="submit" class="link-btn">Archive</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                    </table>
            </section>
        </div>
        
        <div class="overlay-background"></div>

        <section id="manage-section">
            <div class="grid-area-top">
                <nav id="option-nav" class="front-layer">
                    <div class="go-back-btn-div">
                        <button type="button" id="nav-go-back-btn" class="go-back-btn">Go back</button>
                    </div>

                    <ul>
                        <li><a href="#" id="deck-info-link">Deck info</a></li>
                        <li><a href="#" id="list-deck-link">List deck</a></li>
                        <li><a href="#" id="create-card-link">Create card</a></li>
                    </ul>
                </nav>
            </div>

            <div class="grid-area-right">
                <div id="option-display" class="front-layer">
                    <div class="go-back-btn-div">
                        <button type="button" id="display-go-back-btn" class="go-back-btn">Go back</button>
                    </div>

                    <div id="option-area"></div>

                    <div id="next-previous-btn-div"></div>
                </div>
            </div>
    
            <div id="edit-form-div" class="front-layer">
                <div class="go-back-btn-div">
                    <button type="button" id="edit-go-back-btn" class="go-back-btn">Go back</button>
                </div>
                
                <h4>Edit card</h4>

                <form action="#" id="basic-card-form">
                    {% csrf_token %}
                    {{ basic_card_form | crispy }}
                    <input type="hidden" id="id-field">
                    <input type="submit" id="save-submit" value="Save">
                </form>
            </div>
    
            <div id="create-form-div" class="front-layer">
                <div class="go-back-btn-div">
                    <button type="button" id="create-go-back-btn" class="go-back-btn">Go back</button>
                </div>
                
                <div id="create-message"></div>

                <h4>Create new card</h4>

                <form action="#" id="basic-card-form">
                    {% csrf_token %}
                    {{ basic_card_form | crispy }}
                    <input type="submit" id="create-submit" value="Create">
                </form> 
            </div>
        </section>  
    </div>
</main>
{% endblock %}